export EDITOR=vi
export VISUAL=vi

# Init completion
autoload -Uz compinit
compinit

# Load modular config files
for f in ~/.zsh/*.zsh; do
  [ -r "$f" ] && source "$f"
done

# --- Plugins (~/.zsh/plugins/*) ---
# autosuggestions
if [ -r ~/.zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh ]; then
  source ~/.zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

# syntax highlighting
if [ -r ~/.zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then
  source ~/.zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi

# forgit
if [ -r ~/.zsh/plugins/forgit/forgit.plugin.zsh ]; then
  source ~/.zsh/plugins/forgit/forgit.plugin.zsh
fi

# --- Starship ---
if command -v starship >/dev/null 2>&1; then
  export STARSHIP_CACHE="${XDG_CACHE_HOME:-$HOME/.cache}/starship"
  eval "$(starship init zsh)"
fi

# --- Mise ---
if command -v mise >/dev/null 2>&1; then
  eval "$(mise activate zsh)"
fi 

# Auto-start tmux (only for interactive shells, and only if not already inside tmux)
if [[ -o interactive ]] && command -v tmux >/dev/null 2>&1; then
  if [ -z "$TMUX" ]; then
    exec tmux
  fi
fi

