#!/usr/bin/env bash
set -euo pipefail

. "$DOTLIB/log.sh"

BASE="$HOME/.zsh/plugins"

log_info "zsh plugins"

mkdir -p "$BASE"

clone_or_update () {
  local name="$1"
  local repo="$2"
  local dir="$BASE/$name"

  if [ -d "$dir/.git" ]; then
    log_info "Updating $name"
    git -C "$dir" pull --ff-only
  else
    log_info "Cloning $name"
    git clone "$repo" "$dir"
  fi
}

clone_or_update zsh-autosuggestions https://github.com/zsh-users/zsh-autosuggestions
clone_or_update zsh-syntax-highlighting https://github.com/zsh-users/zsh-syntax-highlighting
clone_or_update forgit https://github.com/wfxr/forgit
